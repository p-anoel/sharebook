{"ast":null,"code":"import React from'react';import Book from'./Book';import axios from'axios';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class ListBooks extends React.Component{constructor(){super();this.state={books:[]};}borrowBook(bookId){axios.post(\"/borrows/\".concat(bookId),{}).then(()=>{this.props.history('/myBorrows');});}componentDidMount(){axios.get('/books?status=FREE').then(response=>{this.setState({books:response.data});}).catch(err=>{console.error('failed to retrieve books');});}render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Livres disponibles\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-container\",children:[this.state.books.length===0?\"Pas de livres disponibles\":null,this.state.books.map(book=>/*#__PURE__*/_jsxs(\"div\",{className:\"list-book-container\",children:[/*#__PURE__*/_jsx(Book,{title:book.title,category:book.category.label,lender:\"\".concat(book.user.firstName,\" \").concat(book.user.lastName)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:()=>this.borrowBook(book.id),children:\"Emprunter\"})})]},book.id))]})]});}}// Wrap and export\nexport default function(props){const history=useNavigate();return/*#__PURE__*/_jsx(ListBooks,{...props,history:history});}","map":{"version":3,"names":["React","Book","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","ListBooks","Component","constructor","state","books","borrowBook","bookId","post","concat","then","props","history","componentDidMount","get","response","setState","data","catch","err","console","error","render","className","children","length","map","book","title","category","label","lender","user","firstName","lastName","onClick","id"],"sources":["/Users/pnoel/workspace/sharebook/book-api/frontend-sharebook/src/ListBooks.js"],"sourcesContent":["import React from 'react'\nimport Book from './Book'\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\n\nclass ListBooks extends React.Component {\n\n    constructor() {\n        super();\n        this.state = {\n            books: []\n        }\n    }\n\n    borrowBook(bookId) {\n        axios.post(`/borrows/${bookId}`, {}).then(()=> {\n          this.props.history('/myBorrows')\n        })\n    }\n\n    componentDidMount(){\n        axios.get('/books?status=FREE').then(response => {\n            this.setState({books: response.data})\n          }).catch(err => {\n            console.error('failed to retrieve books')\n            })\n    }\n\n    render (){\n        \n        return ( \n        <div className='container'>\n            <h1>Livres disponibles</h1>\n            <div className=\"list-container\">\n                {this.state.books.length === 0 ? \"Pas de livres disponibles\" : null}\n                {this.state.books.map((book) => (<div className=\"list-book-container\" key={book.id}>\n                <Book title={book.title} category={book.category.label} lender={`${book.user.firstName} ${book.user.lastName}`}></Book>\n                <div className=\"text-center\">\n                    <button className=\"btn btn-primary btn-sm\" onClick={() => this.borrowBook(book.id)}>Emprunter</button>\n                </div>\n                </div>))}\n            </div>\n        </div>)\n    }\n}\n\n// Wrap and export\nexport default function (props) {\n    const history = useNavigate();\n    return <ListBooks {...props} history={history} />;\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,SAAS,QAAS,CAAAR,KAAK,CAACS,SAAU,CAEpCC,WAAWA,CAAA,CAAG,CACV,KAAK,CAAC,CAAC,CACP,IAAI,CAACC,KAAK,CAAG,CACTC,KAAK,CAAE,EACX,CAAC,CACL,CAEAC,UAAUA,CAACC,MAAM,CAAE,CACfZ,KAAK,CAACa,IAAI,aAAAC,MAAA,CAAaF,MAAM,EAAI,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC,IAAK,CAC7C,IAAI,CAACC,KAAK,CAACC,OAAO,CAAC,YAAY,CAAC,CAClC,CAAC,CAAC,CACN,CAEAC,iBAAiBA,CAAA,CAAE,CACflB,KAAK,CAACmB,GAAG,CAAC,oBAAoB,CAAC,CAACJ,IAAI,CAACK,QAAQ,EAAI,CAC7C,IAAI,CAACC,QAAQ,CAAC,CAACX,KAAK,CAAEU,QAAQ,CAACE,IAAI,CAAC,CAAC,CACvC,CAAC,CAAC,CAACC,KAAK,CAACC,GAAG,EAAI,CACdC,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAC,CACzC,CAAC,CAAC,CACV,CAEAC,MAAMA,CAAA,CAAG,CAEL,mBACAtB,KAAA,QAAKuB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtB1B,IAAA,OAAA0B,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3BxB,KAAA,QAAKuB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC1B,IAAI,CAACpB,KAAK,CAACC,KAAK,CAACoB,MAAM,GAAK,CAAC,CAAG,2BAA2B,CAAG,IAAI,CAClE,IAAI,CAACrB,KAAK,CAACC,KAAK,CAACqB,GAAG,CAAEC,IAAI,eAAM3B,KAAA,QAAKuB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eACrE1B,IAAA,CAACJ,IAAI,EAACkC,KAAK,CAAED,IAAI,CAACC,KAAM,CAACC,QAAQ,CAAEF,IAAI,CAACE,QAAQ,CAACC,KAAM,CAACC,MAAM,IAAAtB,MAAA,CAAKkB,IAAI,CAACK,IAAI,CAACC,SAAS,MAAAxB,MAAA,CAAIkB,IAAI,CAACK,IAAI,CAACE,QAAQ,CAAG,CAAO,CAAC,cACvHpC,IAAA,QAAKyB,SAAS,CAAC,aAAa,CAAAC,QAAA,cACxB1B,IAAA,WAAQyB,SAAS,CAAC,wBAAwB,CAACY,OAAO,CAAEA,CAAA,GAAM,IAAI,CAAC7B,UAAU,CAACqB,IAAI,CAACS,EAAE,CAAE,CAAAZ,QAAA,CAAC,WAAS,CAAQ,CAAC,CACrG,CAAC,GAJqEG,IAAI,CAACS,EAK3E,CAAE,CAAC,EACP,CAAC,EACL,CAAC,CACV,CACJ,CAEA;AACA,cAAe,UAAUzB,KAAK,CAAE,CAC5B,KAAM,CAAAC,OAAO,CAAGhB,WAAW,CAAC,CAAC,CAC7B,mBAAOE,IAAA,CAACG,SAAS,KAAKU,KAAK,CAAEC,OAAO,CAAEA,OAAQ,CAAE,CAAC,CACrD"},"metadata":{},"sourceType":"module","externalDependencies":[]}