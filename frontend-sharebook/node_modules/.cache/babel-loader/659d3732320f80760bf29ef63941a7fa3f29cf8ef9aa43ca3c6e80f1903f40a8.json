{"ast":null,"code":"import React from'react';import Book from'./Book';import'./MyBorrows.scss';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyBorrows(){const[myBorrows,setMyBorrows]=React.useState([]);const getMyBorrows=()=>{axios.get('/borrows').then(response=>{setMyBorrows(response.data);}).catch(err=>{console.error('failed to retrieve books');});};React.useEffect(()=>{getMyBorrows();},[]);const closeBorrow=borrowId=>{axios.delete(\"/borrows/\".concat(borrowId)).then(response=>{getMyBorrows();});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mes emprunts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"list-container\",children:myBorrows.map((borrow,key)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"borrow-container\",children:[/*#__PURE__*/_jsx(Book,{title:borrow.book.title,category:borrow.book.category.label,lender:borrow.lender.firstName+\" \"+borrow.lender.lastName,askDate:borrow.askDate,closeDate:borrow.closeDate}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:borrow.closeDate?\"\":/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:()=>closeBorrow(borrow.id),children:\"Clore\"})})]},key);})}),myBorrows.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Vous n'avez pas d'emprunt\"}):null]});}","map":{"version":3,"names":["React","Book","axios","jsx","_jsx","jsxs","_jsxs","MyBorrows","myBorrows","setMyBorrows","useState","getMyBorrows","get","then","response","data","catch","err","console","error","useEffect","closeBorrow","borrowId","delete","concat","className","children","map","borrow","key","title","book","category","label","lender","firstName","lastName","askDate","closeDate","onClick","id","length"],"sources":["/Users/pnoel/workspace/sharebook/book-api/frontend-sharebook/src/MyBorrows.js"],"sourcesContent":["import React from 'react'\nimport Book from './Book'\nimport './MyBorrows.scss'\nimport axios from 'axios';\n\nexport default function MyBorrows() {\n    const [myBorrows, setMyBorrows] = React.useState([]);\n    const getMyBorrows = () => {\n        axios.get('/borrows').then(response => {\n            setMyBorrows(response.data)\n           }).catch(err => {\n            console.error('failed to retrieve books')\n            })\n    }\n\n    React.useEffect(()=> {\n        getMyBorrows();\n    },[])\n\n    const closeBorrow = (borrowId) => {\n        axios.delete(`/borrows/${borrowId}`).then(response => {\n            getMyBorrows();\n        })\n    }\n\n    return (\n        <div className=\"container\">\n            <h1>Mes emprunts</h1>\n            <div className=\"list-container\">\n                {myBorrows.map((borrow, key) => {\n                    return (\n                        <div className=\"borrow-container\" key={key}>\n                            <Book\n                                title={borrow.book.title}\n                                category={borrow.book.category.label}\n                                lender={borrow.lender.firstName + \" \" + borrow.lender.lastName}\n                                askDate={borrow.askDate}\n                                closeDate={borrow.closeDate}>\n                            </Book>\n                            <div className=\"text-center\">\n                                {borrow.closeDate ? \"\" : <button className=\"btn btn-primary btn-sm\" onClick={() => closeBorrow(borrow.id)}>Clore</button>}\n                            </div>\n                        </div>\n                    )\n                })}\n            </div>\n            {myBorrows.length === 0 ? <div>Vous n'avez pas d'emprunt</div> : null}\n        </div>\n    )\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,kBAAkB,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAG,CAChC,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGT,KAAK,CAACU,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACvBT,KAAK,CAACU,GAAG,CAAC,UAAU,CAAC,CAACC,IAAI,CAACC,QAAQ,EAAI,CACnCL,YAAY,CAACK,QAAQ,CAACC,IAAI,CAAC,CAC5B,CAAC,CAAC,CAACC,KAAK,CAACC,GAAG,EAAI,CACfC,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAC,CACzC,CAAC,CAAC,CACV,CAAC,CAEDnB,KAAK,CAACoB,SAAS,CAAC,IAAK,CACjBT,YAAY,CAAC,CAAC,CAClB,CAAC,CAAC,EAAE,CAAC,CAEL,KAAM,CAAAU,WAAW,CAAIC,QAAQ,EAAK,CAC9BpB,KAAK,CAACqB,MAAM,aAAAC,MAAA,CAAaF,QAAQ,CAAE,CAAC,CAACT,IAAI,CAACC,QAAQ,EAAI,CAClDH,YAAY,CAAC,CAAC,CAClB,CAAC,CAAC,CACN,CAAC,CAED,mBACIL,KAAA,QAAKmB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBtB,IAAA,OAAAsB,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBtB,IAAA,QAAKqB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC1BlB,SAAS,CAACmB,GAAG,CAAC,CAACC,MAAM,CAAEC,GAAG,GAAK,CAC5B,mBACIvB,KAAA,QAAKmB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7BtB,IAAA,CAACH,IAAI,EACD6B,KAAK,CAAEF,MAAM,CAACG,IAAI,CAACD,KAAM,CACzBE,QAAQ,CAAEJ,MAAM,CAACG,IAAI,CAACC,QAAQ,CAACC,KAAM,CACrCC,MAAM,CAAEN,MAAM,CAACM,MAAM,CAACC,SAAS,CAAG,GAAG,CAAGP,MAAM,CAACM,MAAM,CAACE,QAAS,CAC/DC,OAAO,CAAET,MAAM,CAACS,OAAQ,CACxBC,SAAS,CAAEV,MAAM,CAACU,SAAU,CAC1B,CAAC,cACPlC,IAAA,QAAKqB,SAAS,CAAC,aAAa,CAAAC,QAAA,CACvBE,MAAM,CAACU,SAAS,CAAG,EAAE,cAAGlC,IAAA,WAAQqB,SAAS,CAAC,wBAAwB,CAACc,OAAO,CAAEA,CAAA,GAAMlB,WAAW,CAACO,MAAM,CAACY,EAAE,CAAE,CAAAd,QAAA,CAAC,OAAK,CAAQ,CAAC,CACxH,CAAC,GAV6BG,GAWlC,CAAC,CAEd,CAAC,CAAC,CACD,CAAC,CACLrB,SAAS,CAACiC,MAAM,GAAK,CAAC,cAAGrC,IAAA,QAAAsB,QAAA,CAAK,2BAAyB,CAAK,CAAC,CAAG,IAAI,EACpE,CAAC,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}