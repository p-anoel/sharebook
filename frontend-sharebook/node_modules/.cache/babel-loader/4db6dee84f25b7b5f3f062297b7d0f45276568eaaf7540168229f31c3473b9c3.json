{"ast":null,"code":"var _jsxFileName = \"/Users/pnoel/workspace/sharebook/frontend-sharebook/src/AddBook.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport \"./AddBook.scss\";\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddBook() {\n  _s();\n  let {\n    bookId\n  } = useParams();\n  const [bookData, setBookData] = useState({\n    title: '',\n    categoryId: ''\n  });\n  const [categoriesData, setCategoriesData] = useState([]);\n  const history = useNavigate();\n  useEffect(() => {\n    axios.get('/categories').then(response => {\n      setCategoriesData(response.data);\n      setBookData({\n        title: '',\n        categoryId: response.data[0].id\n      });\n    }).then(() => {\n      if (bookId) {\n        axios.get(`/books/${bookId}`).then(response => {\n          setBookData({\n            title: response.data.title,\n            categoryId: response.data.category.id\n          });\n        });\n      }\n    });\n  }, [bookId]);\n  const handleChange = event => {\n    let currentState = {\n      ...bookData\n    };\n    currentState[event.target.name] = event.target.value;\n    setBookData(currentState);\n  };\n  const onSubmit = event => {\n    if (bookId) {\n      event.preventDefault();\n      axios.put(`/books/${bookId}`, {\n        ...bookData\n      }).then(() => {\n        //rediriger vers myBooks\n        history(\"/myBooks\");\n      });\n    } else {\n      event.preventDefault();\n      axios.post('/books', {\n        ...bookData\n      }).then(() => {\n        //rediriger vers myBooks\n        history(\"/myBooks\");\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-add-book\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Ajouter un livre\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nom du livre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"title\",\n          type: \"text\",\n          value: bookData.title,\n          onChange: handleChange,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Cat\\xE9gorie du livre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"categoryId\",\n          value: bookData.categoryId,\n          onChange: handleChange,\n          className: \"form-select\",\n          children: categoriesData.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: category.id,\n            children: category.label\n          }, category.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-submit\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Valider\",\n          className: \"btn btn-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(AddBook, \"UGcdV1rqovZjJesi0mWbqokSMSM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = AddBook;\nvar _c;\n$RefreshReg$(_c, \"AddBook\");","map":{"version":3,"names":["React","useParams","useNavigate","useState","useEffect","axios","jsxDEV","_jsxDEV","AddBook","_s","bookId","bookData","setBookData","title","categoryId","categoriesData","setCategoriesData","history","get","then","response","data","id","category","handleChange","event","currentState","target","name","value","onSubmit","preventDefault","put","post","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","map","label","_c","$RefreshReg$"],"sources":["/Users/pnoel/workspace/sharebook/frontend-sharebook/src/AddBook.js"],"sourcesContent":["import React from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport \"./AddBook.scss\"\nimport { useState, useEffect } from 'react'\nimport axios from 'axios';\n\nexport default function AddBook() {\n    let { bookId } = useParams();\n    const [bookData, setBookData] = useState({\n        title: '',\n        categoryId: ''\n\n    })\n    const [categoriesData, setCategoriesData] = useState([])\n    const history = useNavigate();\n\n    useEffect(() => {\n        axios.get('/categories').then(response => {\n            setCategoriesData(response.data)\n            setBookData({\n                title: '',\n                categoryId: response.data[0].id\n            })\n        }).then(() => {\n            if (bookId) {\n                axios.get(`/books/${bookId}`).then(response => {\n                    setBookData({\n                        title: response.data.title,\n                        categoryId: response.data.category.id\n                    })})\n                }\n\n            })\n    }, [bookId]);\n\n    const handleChange = (event) => {\n        let currentState = {...bookData};\n        currentState[event.target.name] = event.target.value;\n        setBookData(currentState)\n    }\n\n    const onSubmit = (event) => {\n        if (bookId) {\n            event.preventDefault();\n            axios.put(`/books/${bookId}`, {\n                ...bookData\n            }).then(() => {\n                //rediriger vers myBooks\n                history(\"/myBooks\")\n            })\n        } else {\n            event.preventDefault();\n            axios.post('/books', {\n                ...bookData\n            }).then(() => {\n                //rediriger vers myBooks\n                history(\"/myBooks\")\n            })\n        }\n    }\n    return (\n        <div className=\"container-add-book\">\n            <h1>Ajouter un livre</h1>\n            <form onSubmit={onSubmit}>\n                <div>\n                    <label>Nom du livre</label>\n                    <input name=\"title\" type=\"text\" value={bookData.title} onChange={handleChange} className=\"form-control\"></input>\n                </div>\n                <div>\n                    <label>Cat√©gorie du livre</label>\n                    <select name=\"categoryId\" value={bookData.categoryId} onChange={handleChange} className=\"form-select\">\n                        {categoriesData.map(category => (\n                            <option value={category.id} key={category.id}>{category.label}</option>\n                        ))}\n                    </select>\n                </div>\n                <div className=\"container-submit\">\n                    <input type=\"submit\" value=\"Valider\" className=\"btn btn-primary\"></input>\n                </div>\n            </form>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}