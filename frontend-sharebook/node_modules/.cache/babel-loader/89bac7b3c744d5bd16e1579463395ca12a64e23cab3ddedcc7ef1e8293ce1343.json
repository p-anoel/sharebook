{"ast":null,"code":"var _jsxFileName = \"/Users/pnoel/workspace/sharebook/frontend-sharebook/src/AddUser.js\";\nimport React from 'react';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport './AddUser.scss';\nimport axios from 'axios';\nimport { AUTH_TOKEN_KEY } from './App';\nimport SimpleModal from './SimpleModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass AddUser extends React.Component {\n  constructor() {\n    super();\n    this.handleChange = event => {\n      let currentState = {\n        ...this.state.userData\n      };\n      currentState[event.target.name] = event.target.value;\n      this.setState({\n        userData: currentState\n      });\n    };\n    this.handleCloseModal = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n    this.onSubmit = event => {\n      event.preventDefault();\n      axios.post('/users', {\n        ...this.state.userData\n      }).then(response => {\n        var _response$headers;\n        const bearerToken = response === null || response === void 0 ? void 0 : (_response$headers = response.headers) === null || _response$headers === void 0 ? void 0 : _response$headers.authorization;\n        if (bearerToken && bearerToken.slice(0, 7) === 'Bearer ') {\n          const jwt = bearerToken.slice(7, bearerToken.length);\n          sessionStorage.setItem(AUTH_TOKEN_KEY, jwt);\n        }\n        this.props.setUserInfo(response.data.firstName + \" \" + response.data.lastName);\n        this.props.history(\"/myBooks\");\n      }).catch(() => {\n        this.setState({\n          showModal: true\n        });\n      });\n    };\n    this.state = {\n      userData: {},\n      showModal: false\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add-user-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"M'inscrire\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.onSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 51,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"email\",\n                  type: \"text\",\n                  className: \"form-control\",\n                  onChange: this.handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 52,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 50,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"nom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 55,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"lastName\",\n                  type: \"text\",\n                  className: \"form-control\",\n                  onChange: this.handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"prenom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"firstName\",\n                  type: \"text\",\n                  className: \"form-control\",\n                  onChange: this.handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"password\",\n                  type: \"password\",\n                  className: \"form-control\",\n                  onChange: this.handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container-valid text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"submit\",\n                  value: \"Valider\",\n                  className: \"btn btn-primary\",\n                  onChange: this.handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              children: \"Retour \\xE0 l'accueil\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(SimpleModal, {\n        title: \"Mail déja utilisé\",\n        bodyTxt: \"Cet email est déja utilisé, merci d'en saisir un autre\",\n        handleCloseModal: this.handleCloseModal,\n        showModal: this.state.showModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}\nexport default function (props) {\n  const history = useNavigate();\n  return /*#__PURE__*/_jsxDEV(AddUser, {\n    ...props,\n    history: history\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 12\n  }, this);\n}","map":{"version":3,"names":["React","Link","useNavigate","axios","AUTH_TOKEN_KEY","SimpleModal","jsxDEV","_jsxDEV","Fragment","_Fragment","AddUser","Component","constructor","handleChange","event","currentState","state","userData","target","name","value","setState","handleCloseModal","showModal","onSubmit","preventDefault","post","then","response","_response$headers","bearerToken","headers","authorization","slice","jwt","length","sessionStorage","setItem","props","setUserInfo","data","firstName","lastName","history","catch","render","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","to","title","bodyTxt"],"sources":["/Users/pnoel/workspace/sharebook/frontend-sharebook/src/AddUser.js"],"sourcesContent":["import React from 'react'\nimport { Link , useNavigate } from \"react-router-dom\";\nimport './AddUser.scss'\nimport axios from 'axios';\nimport { AUTH_TOKEN_KEY } from './App';\nimport SimpleModal from './SimpleModal';\n\nclass AddUser extends React.Component {\n\n  constructor() {\n    super();\n    this.state = { userData: {}, showModal: false}\n  }\n\n  handleChange = (event) => {\n    let currentState = { ...this.state.userData };\n    currentState[event.target.name] = event.target.value;\n    this.setState({ userData: currentState })\n  }\n\n  handleCloseModal = () => {\n    this.setState({ showModal: false })\n  }\n\n  onSubmit = (event) => {\n    event.preventDefault();\n    axios.post('/users', {\n        ...this.state.userData\n      }).then(response => {\n         const bearerToken = response?.headers?.authorization;\n         if (bearerToken && bearerToken.slice(0, 7) === 'Bearer ') {\n           const jwt = bearerToken.slice(7, bearerToken.length);\n           sessionStorage.setItem(AUTH_TOKEN_KEY,jwt)\n         }\n         this.props.setUserInfo(response.data.firstName + \" \" + response.data.lastName)\n       this.props.history(\"/myBooks\")\n     }).catch(() => {\n       this.setState({ showModal: true })\n     })\n   }\n\n  render() {\n    return (\n      <>\n      <div className=\"add-user-container\">\n        <div>\n          <h1>M'inscrire</h1>\n          <div>\n            <form onSubmit={this.onSubmit}>\n              <div>\n                <label>email</label>\n                <input name=\"email\" type=\"text\" className=\"form-control\" onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>nom</label>\n                <input name=\"lastName\" type=\"text\" className=\"form-control\" onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>prenom</label>\n                <input name=\"firstName\" type=\"text\" className=\"form-control\" onChange={this.handleChange} />\n              </div>\n              <div>\n                <label>password</label>\n                <input name=\"password\" type=\"password\" className=\"form-control\" onChange={this.handleChange} />\n              </div>\n              <div className=\"container-valid text-center\">\n                <input type=\"submit\" value=\"Valider\" className=\"btn btn-primary\" onChange={this.handleChange} />\n              </div>\n            </form>\n          </div>\n          <div><Link to=\"/\">Retour à l'accueil</Link></div>\n        </div>\n      </div>\n        <SimpleModal\n        title={\"Mail déja utilisé\"}\n        bodyTxt={\"Cet email est déja utilisé, merci d'en saisir un autre\"}\n        handleCloseModal={this.handleCloseModal}\n        showModal={this.state.showModal}\n        ></SimpleModal>\n      </>\n    )\n  }\n}\n\nexport default function (props) {\n    const history = useNavigate();\n    return <AddUser {...props} history={history} />;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}