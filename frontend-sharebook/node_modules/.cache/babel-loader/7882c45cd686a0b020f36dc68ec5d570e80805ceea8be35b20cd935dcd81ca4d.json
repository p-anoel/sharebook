{"ast":null,"code":"var _jsxFileName = \"/Users/pnoel/workspace/sharebook/frontend-sharebook/src/MyBooks.js\",\n  _s = $RefreshSig$();\nimport Book from './Book';\nimport React from 'react';\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\nimport './MyBooks.scss';\nimport SimpleModal from './SimpleModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MyBooks = () => {\n  _s();\n  const [myBooks, setMyBooks] = React.useState([]);\n  const [showModal, setShowModal] = React.useState(false);\n  const fetchBooks = () => {\n    axios.get('/books').then(response => {\n      setMyBooks(response.data);\n    });\n  };\n  const history = useNavigate();\n  React.useEffect(() => {\n    fetchBooks();\n  }, []);\n  const deleteMyBook = bookId => {\n    axios.delete(`/books/${bookId}`).then(() => {\n      fetchBooks();\n    }).catch(error => {\n      setShowModal(true);\n    });\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Mes livres\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list-container\",\n        children: [myBooks.length === 0 ? \"Vous n'avez pas déclaré de livres\" : null, myBooks.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mybook-container\",\n          children: [/*#__PURE__*/_jsxDEV(Book, {\n            title: book.title,\n            category: book.category.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary btn-sm\",\n              onClick: () => history(`/addBook/${book.id}`),\n              children: \"Modifier\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary btn-sm\",\n              onClick: () => deleteMyBook(book.id),\n              children: \"Supprimer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 11\n          }, this)]\n        }, book.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 35\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary btn-sm\",\n        onClick: () => history(`/addBook`),\n        children: \"Nouveau Livre\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SimpleModal, {\n      title: \"Supression de livre impossible\",\n      bodyTxt: \"Livre en cours d'emprunt\",\n      handleCloseModal: handleCloseModal,\n      showModal: showModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(MyBooks, \"RPmynwI6EmKr5VfALBzIg8mqZhQ=\", false, function () {\n  return [useNavigate];\n});\n_c = MyBooks;\nexport default MyBooks;\nvar _c;\n$RefreshReg$(_c, \"MyBooks\");","map":{"version":3,"names":["Book","React","axios","useNavigate","SimpleModal","jsxDEV","_jsxDEV","Fragment","_Fragment","MyBooks","_s","myBooks","setMyBooks","useState","showModal","setShowModal","fetchBooks","get","then","response","data","history","useEffect","deleteMyBook","bookId","delete","catch","error","handleCloseModal","children","className","fileName","_jsxFileName","lineNumber","columnNumber","length","map","book","title","category","label","onClick","id","bodyTxt","_c","$RefreshReg$"],"sources":["/Users/pnoel/workspace/sharebook/frontend-sharebook/src/MyBooks.js"],"sourcesContent":["import Book from './Book'\nimport React from 'react'\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\nimport './MyBooks.scss'\nimport SimpleModal from './SimpleModal'\n\nconst MyBooks = () => {\n\n  const [myBooks, setMyBooks] = React.useState([]);\n  const [showModal, setShowModal] = React.useState(false)\n\n  const fetchBooks = () => {\n    axios.get('/books').then(response => {\n      setMyBooks(response.data)\n    })\n  }\n\n  const history = useNavigate();\n\n  React.useEffect(() => {\n    fetchBooks();\n  }, [])\n\n  const deleteMyBook = (bookId) => {\n    axios.delete(`/books/${bookId}`).then(() => {\n      fetchBooks();\n    }).catch(error => {\n      setShowModal(true)\n    })\n  }\n\n  const handleCloseModal = () => {\n    setShowModal(false)\n  }\n\n  return (\n    <>\n      <div className='container'>\n        <h1>Mes livres</h1>\n        <div className=\"list-container\">\n          {myBooks.length === 0 ? \"Vous n'avez pas déclaré de livres\" : null}\n          {myBooks.map((book) => (<div className=\"mybook-container\" key={book.id}>\n          <Book title={book.title} category={book.category.label}></Book>\n          <div className=\"container-buttons\">\n            <button className=\"btn btn-primary btn-sm\" onClick={() => history(`/addBook/${book.id}`)}>Modifier</button>\n            <button className=\"btn btn-primary btn-sm\" onClick={() => deleteMyBook(book.id)}>Supprimer</button>\n          </div>\n          </div>))}\n        </div>\n          <button className=\"btn btn-primary btn-sm\" onClick={() => history(`/addBook`)}>Nouveau Livre</button>\n      </div>\n      <SimpleModal\n        title={\"Supression de livre impossible\"}\n        bodyTxt={\"Livre en cours d'emprunt\"}\n        handleCloseModal={handleCloseModal}\n        showModal={showModal}\n      ></SimpleModal>\n    </>\n    )\n  }\n\n  export default MyBooks;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}