{"ast":null,"code":"import Book from'./Book';import React from'react';import axios from'axios';import{useNavigate}from\"react-router-dom\";import'./MyBooks.scss';import SimpleModal from'./SimpleModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const MyBooks=()=>{const[myBooks,setMyBooks]=React.useState([]);const[showModal,setShowModal]=React.useState(false);const fetchBooks=()=>{axios.get('/books').then(response=>{setMyBooks(response.data);});};const history=useNavigate();React.useEffect(()=>{fetchBooks();},[]);const deleteMyBook=bookId=>{axios.delete(\"/books/\".concat(bookId)).then(()=>{fetchBooks();}).catch(error=>{setShowModal(true);});};const handleCloseModal=()=>{setShowModal(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mes livres\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-container\",children:[myBooks.length===0?\"Vous n'avez pas déclaré de livres\":null,myBooks.map(book=>/*#__PURE__*/_jsxs(\"div\",{className:\"mybook-container\",children:[/*#__PURE__*/_jsx(Book,{title:book.title,category:book.category.label}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:()=>history(\"/addBook/\".concat(book.id)),children:\"Modifier\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:()=>deleteMyBook(book.id),children:\"Supprimer\"})]})]},book.id))]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:()=>history(\"/addBook\"),children:\"Nouveau Livre\"})]}),/*#__PURE__*/_jsx(SimpleModal,{title:\"Supression de livre impossible\",bodyTxt:\"Livre en cours d'emprunt\",handleCloseModal:handleCloseModal,showModal:showModal})]});};export default MyBooks;","map":{"version":3,"names":["Book","React","axios","useNavigate","SimpleModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyBooks","myBooks","setMyBooks","useState","showModal","setShowModal","fetchBooks","get","then","response","data","history","useEffect","deleteMyBook","bookId","delete","concat","catch","error","handleCloseModal","children","className","length","map","book","title","category","label","onClick","id","bodyTxt"],"sources":["/Users/pnoel/workspace/sharebook/book-api/frontend-sharebook/src/MyBooks.js"],"sourcesContent":["import Book from './Book'\nimport React from 'react'\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\nimport './MyBooks.scss'\nimport SimpleModal from './SimpleModal'\n\nconst MyBooks = () => {\n\n  const [myBooks, setMyBooks] = React.useState([]);\n  const [showModal, setShowModal] = React.useState(false)\n\n  const fetchBooks = () => {\n    axios.get('/books').then(response => {\n      setMyBooks(response.data)\n    })\n  }\n\n  const history = useNavigate();\n\n  React.useEffect(() => {\n    fetchBooks();\n  }, [])\n\n  const deleteMyBook = (bookId) => {\n    axios.delete(`/books/${bookId}`).then(() => {\n      fetchBooks();\n    }).catch(error => {\n      setShowModal(true)\n    })\n  }\n\n  const handleCloseModal = () => {\n    setShowModal(false)\n  }\n\n  return (\n    <>\n      <div className='container'>\n        <h1>Mes livres</h1>\n        <div className=\"list-container\">\n          {myBooks.length === 0 ? \"Vous n'avez pas déclaré de livres\" : null}\n          {myBooks.map((book) => (<div className=\"mybook-container\" key={book.id}>\n          <Book title={book.title} category={book.category.label}></Book>\n          <div className=\"container-buttons\">\n            <button className=\"btn btn-primary btn-sm\" onClick={() => history(`/addBook/${book.id}`)}>Modifier</button>\n            <button className=\"btn btn-primary btn-sm\" onClick={() => deleteMyBook(book.id)}>Supprimer</button>\n          </div>\n          </div>))}\n        </div>\n          <button className=\"btn btn-primary btn-sm\" onClick={() => history(`/addBook`)}>Nouveau Livre</button>\n      </div>\n      <SimpleModal\n        title={\"Supression de livre impossible\"}\n        bodyTxt={\"Livre en cours d'emprunt\"}\n        handleCloseModal={handleCloseModal}\n        showModal={showModal}\n      ></SimpleModal>\n    </>\n    )\n  }\n\n  export default MyBooks;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}